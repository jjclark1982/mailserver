postfix:
    build: ./postfix
    hostname: mail
    domainname: modusponens.org
    ports:
        - "25:25"
        - "465:465"
        - "587:587"
    links:
        - opendkim
        - spamassassin
        # - dovecot
    volumes:
        - /etc/ssl:/etc/ssl:ro
        - /etc/aliases:/etc/aliases:ro
        # - /dev/log:/dev/log
        # - /dev/log:/var/spool/postfix/dev/log
    volumes_from:
        - syslog
    environment:
        maildomain: modusponens.org
        mailhost: mail.modusponens.org

opendkim:
    build: ./opendkim
    volumes:
        - /etc/ssl:/etc/ssl:ro
        # - /dev/log:/dev/log
    volumes_from:
        - syslog
    environment:
        maildomain: modusponens.org

syslog:
    build: ./syslog

spamassassin:
    build: ./spamassassin
    # volumes:
    #     - /dev/log:/dev/log
    volumes_from:
        - syslog

# dovecot:
#     build: ./dovecot
